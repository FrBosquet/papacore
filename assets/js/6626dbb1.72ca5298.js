"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[462],{4602:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"cli/build","title":"papacore build","description":"Build your project once without watching for changes.","source":"@site/docs/cli/build.md","sourceDirName":"cli","slug":"/cli/build","permalink":"/papacore/docs/cli/build","draft":false,"unlisted":false,"editUrl":"https://github.com/FrBosquet/papacore/tree/main/papacore/website/docs/cli/build.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"papacore init","permalink":"/papacore/docs/cli/init"},"next":{"title":"papacore config","permalink":"/papacore/docs/cli/config"}}');var r=s(7259),l=s(5739);const c={sidebar_position:4},o="papacore build",t={},d=[{value:"Usage",id:"usage",level:2},{value:"What It Does",id:"what-it-does",level:2},{value:"Build Process",id:"build-process",level:2},{value:"Component Transformation",id:"component-transformation",level:3},{value:"View Transformation",id:"view-transformation",level:3},{value:"CSS Processing",id:"css-processing",level:3},{value:"Output Structure",id:"output-structure",level:2},{value:"Build Options",id:"build-options",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Build Performance",id:"build-performance",level:2},{value:"After Building",id:"after-building",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Build Fails",id:"build-fails",level:3},{value:"Output Incorrect",id:"output-incorrect",level:3},{value:"CSS Not Processing",id:"css-not-processing",level:3},{value:"Related Commands",id:"related-commands",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"papacore-build",children:"papacore build"})}),"\n",(0,r.jsx)(n.p,{children:"Build your project once without watching for changes."}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"papacore build\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or via npm/pnpm scripts:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run build\n# or\npnpm build\n"})}),"\n",(0,r.jsx)(n.h2,{id:"what-it-does",children:"What It Does"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"build"})," command:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reads"})," all files from ",(0,r.jsx)(n.code,{children:"src/Datacore/"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transforms"})," TypeScript and JSX to JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Converts"})," imports/exports to Datacore's ",(0,r.jsx)(n.code,{children:"dc.require"})," format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Processes"})," CSS through Tailwind"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Outputs"})," transformed files to ",(0,r.jsx)(n.code,{children:"dist/"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"build-process",children:"Build Process"}),"\n",(0,r.jsx)(n.h3,{id:"component-transformation",children:"Component Transformation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Input"})," (",(0,r.jsx)(n.code,{children:"src/Datacore/components/shared/button.tsx"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { ComponentChildren } from 'preact';\n\nexport function Button({ children }: { children: ComponentChildren }) {\n  return <button className=\"px-4 py-2\">{children}</button>;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Output"})," (",(0,r.jsx)(n.code,{children:"dist/components/shared/button.jsx"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { ComponentChildren } = dc.api;\n\nconst Button = ({ children }) => {\n  return dc.h('button', { className: 'px-4 py-2' }, children);\n};\n\nreturn { Button };\n"})}),"\n",(0,r.jsx)(n.h3,{id:"view-transformation",children:"View Transformation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Input"})," (",(0,r.jsx)(n.code,{children:"src/Datacore/views/Sample.tsx"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { Button } from '@/components/shared/button';\n\nexport default function Sample() {\n  return <div><Button>Click me</Button></div>;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Output"})," (",(0,r.jsx)(n.code,{children:"dist/views/Sample.jsx"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const { Button } = await dc.require('Datacore/components/shared/button');\n\nreturn async () => {\n  return dc.h('div', null, dc.h(Button, null, 'Click me'));\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"css-processing",children:"CSS Processing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Input"})," (",(0,r.jsx)(n.code,{children:"src/styles.css"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:'@import "tailwindcss";\n\n.custom-class {\n  @apply text-blue-500 font-bold;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Output"})," (",(0,r.jsx)(n.code,{children:"dist/papacore.css"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"/* Tailwind utilities + your custom classes */\n.text-blue-500 { color: rgb(59 130 246); }\n.font-bold { font-weight: 700; }\n.custom-class { color: rgb(59 130 246); font-weight: 700; }\n/* ... */\n"})}),"\n",(0,r.jsx)(n.h2,{id:"output-structure",children:"Output Structure"}),"\n",(0,r.jsxs)(n.p,{children:["After building, ",(0,r.jsx)(n.code,{children:"dist/"})," mirrors your ",(0,r.jsx)(n.code,{children:"src/Datacore/"})," structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"dist/\n\u251c\u2500\u2500 components/\n\u2502   \u2514\u2500\u2500 shared/\n\u2502       \u251c\u2500\u2500 button.jsx\n\u2502       \u251c\u2500\u2500 dialog.jsx\n\u2502       \u2514\u2500\u2500 link.jsx\n\u251c\u2500\u2500 utils/\n\u2502   \u251c\u2500\u2500 classMerge.js\n\u2502   \u251c\u2500\u2500 classVariants.js\n\u2502   \u251c\u2500\u2500 files.js\n\u2502   \u251c\u2500\u2500 markdown.js\n\u2502   \u2514\u2500\u2500 time.js\n\u251c\u2500\u2500 views/\n\u2502   \u2514\u2500\u2500 Sample.jsx\n\u2514\u2500\u2500 papacore.css\n"})}),"\n",(0,r.jsx)(n.h2,{id:"build-options",children:"Build Options"}),"\n",(0,r.jsxs)(n.p,{children:["The build command reads configuration from ",(0,r.jsx)(n.code,{children:"papacore.json"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "vaultPath": "/path/to/vault"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"build"})," instead of ",(0,r.jsx)(n.code,{children:"dev"})," when:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testing"}),": You want to verify the build output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI/CD"}),": Running in a pipeline"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Debugging"}),": Inspecting transformed code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"One-off"}),": Not actively developing"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"dev"})," for regular development work."]}),"\n",(0,r.jsx)(n.h2,{id:"build-performance",children:"Build Performance"}),"\n",(0,r.jsx)(n.p,{children:"Build time depends on:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Number of components"}),"\n",(0,r.jsx)(n.li,{children:"Size of CSS file"}),"\n",(0,r.jsx)(n.li,{children:"Complexity of transformations"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Typical build times:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Small project (5-10 files): < 1 second"}),"\n",(0,r.jsx)(n.li,{children:"Medium project (20-50 files): 1-3 seconds"}),"\n",(0,r.jsx)(n.li,{children:"Large project (100+ files): 3-5 seconds"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"after-building",children:"After Building"}),"\n",(0,r.jsx)(n.p,{children:"After building, you can:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inspect output"})," in ",(0,r.jsx)(n.code,{children:"dist/"})," directory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Install to vault"})," with ",(0,r.jsx)(n.code,{children:"papacore install"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test in Obsidian"})," by opening view files"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"build-fails",children:"Build Fails"}),"\n",(0,r.jsx)(n.p,{children:"Check for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TypeScript errors in your code"}),"\n",(0,r.jsx)(n.li,{children:"Invalid JSX syntax"}),"\n",(0,r.jsx)(n.li,{children:"Missing imports"}),"\n",(0,r.jsx)(n.li,{children:"Incorrect file paths"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"output-incorrect",children:"Output Incorrect"}),"\n",(0,r.jsx)(n.p,{children:"Verify:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Babel config is correct"}),"\n",(0,r.jsx)(n.li,{children:"File paths use correct separators"}),"\n",(0,r.jsxs)(n.li,{children:["Imports use proper aliases (",(0,r.jsx)(n.code,{children:"@/"})," for ",(0,r.jsx)(n.code,{children:"src/Datacore/"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"css-not-processing",children:"CSS Not Processing"}),"\n",(0,r.jsx)(n.p,{children:"Ensure:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"styles.css"})," exists in ",(0,r.jsx)(n.code,{children:"src/"})]}),"\n",(0,r.jsx)(n.li,{children:"Tailwind config is valid"}),"\n",(0,r.jsx)(n.li,{children:"PostCSS config is present"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-commands",children:"Related Commands"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/papacore/docs/cli/dev",children:(0,r.jsx)(n.code,{children:"papacore dev"})})," - Build + watch + install"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},5739:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var i=s(6363);const r={},l=i.createContext(r);function c(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);